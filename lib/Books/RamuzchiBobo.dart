// import 'package:easy_localization/easy_localization.dart';
// import 'package:flutter/cupertino.dart';
// import 'package:flutter/gestures.dart';
// import 'package:flutter/material.dart';
//
//
// class RamuzchiBobo extends StatefulWidget {
//   const RamuzchiBobo({Key? key}) : super(key: key);
//   @override
//   State<RamuzchiBobo> createState() => _RamuzchiBoboState();
// }
//
// class _RamuzchiBoboState extends State<RamuzchiBobo> {
//   @override
//   void initState() {
//     // TODO: implement initState
//     super.initState();
//
//   }
//
//
//   String _text =""""Bor ekan-da, yo'q ekan, och ekan-da, to'q ekan,
//    zamonlarning zamonida bir qishloq bor ekan. Bu qishloqda bir hushyor,
//     farosatli, idrokli qari bobo bor ekan. Shu qishloqda yana bir boyvachcha ham bor ekan.
//      Shu boyvachcha ko'chada ketib borayotgan paytda, oldidan juda xushsurat bir qiz chiqib qoldi.
//      Qiz boyvachchaga qarab:Men bir savdogarning qizi edim. Mening otamni qaroqchilar yoʻlda oʻldirdi.
//      Men boʻlsam, bir balo qilib qochib qutuldim. Shu qochganimcha yugurib, yuz ming mashaqqatlar bilan shu yerda sizni ko'rib qoldim.
//       Endi meni olib borib xoh o'zingizga nikoh qiling, xoh xizmatkorlikka oling, deb yolvordi.
//       Boyvachcha qizni uyiga olib kelib, to'y qilib, xotin qilib oldi va u bilan yashab yuraverdi.
//       Keyinchalik shu qishloqdagi odamlardan har kuni bir kishi yo'qola boshladi. Haligi keksa bobo bu ishga hayron qoldi.
//        Bir kuni u boyvachchaning oldida o'tirgan vaqtida, boyvachchaga qarab:Nima uchun sening ranglaring kasalday sarg'ayib qolibdi?
//        Ilgari rangingda qon ko'p edi, – dedi.Ey bobo, ilgari, uylanmasdan burun kuch-quvvatim, qonim ko'p edi.
//        Bilmadim nima ahvol boʻldi, - dedi.Bobo o'ylanib, ko'nglidan ko'p gaplarni o'tkarib, bir hikoya esiga keldi.
//         Hikoya shunday: Bir xil koʻlbar ilonlar borki, ular yerning tagiga kirib qirq yil yotsa, ajdar boʻladi, yana qirq yil yotsa, qiz bo'ladi.
//         Shundan so'ng dunyoda nima istasa, qilib yuraveradi. Magar shunday ilonlardan chiqib, shu boyvachchaga uchragan boʻlmasin», deb, boyvachchaga: - Ey oʻgʻlim, men bir gapni ko'nglimdan o'tkazdim. Ko'nglinga olmasang shuni aytaman, - deb ilon haqidagi hikoyani aytdi:
//          - Magar xotining shu ilonlardan emasmikan. Birinchidan, sening harakating, qoning ketishini, ikkinchidan, qishloq xal- qidan har kecha bir kishining yo'qolishini shundan ko'raman, - dedi.Bola bu so'zlarni eshitib: «Boboning miyasi kamayganga o'xshaydi» deb, o'rnidan turib ketdi. Bir necha kunlardan keyin boyvachchaning ahvoli juda og'irlashib, go'yoki olti oy yotgan kasalday boʻlib, yurish-turishga madori qurib ketdi. Boyvachcha o'zicha ko'p o'ylab, shu boboning oldiga bir boray» deb, asta uning oldiga kelib, bobo bilan ahvol so'rashib, oxirida boboga:
//           - Ey bobo, haqiqatan ham sizning gapingizga achchig'lanib ketgan edim. Endi oʻzimcha o'ylab qarasam, sizning gapingiz to'g'riga o'xshaydi. Shu gapingiz to'g'ri bo'lsa, qanday qilish mumkin? dedi. Bobo: - Ey oʻgʻlim, agar shu voqeani bilay desang, avval oqshom sho'r go'shtlik ovqat pishirib xotiningga yedir, koʻzalarni quruq qo'y, eshiklarni ichidan qulfla. Bir vaqti xotining suvsaydi, koʻzalarni koʻradi. Qarab tur, qani qulflargan eshikdan qanday chiqib ketadi, shundan keyin bilasan. Agar bilsang, sirni hech kimga aytmaysan, unda bir fikr qilamiz, - deb bolani ko'ndirib yubordi. Bola boboning oldidan chiqib, uyiga keldi.
//           Sertuzlik taomlardan yeb, yotadigan paytida koʻzalarni quruq qilib qo'yib, eshikni ichidan qulflab yotdilar. Bola jimjilog'ini tilib, tuz tiqib yotaverdi. Bir vaqt xotini suvsab, har tomonlarni qarab chiqdi, hech qayerda suv yo'q. Keyin bir yumalab bir ilon shakliga kirib, eshik tagidan chiqib ketdi. Borib suv ichib, kelib yotaverdi. Bu ishni ko'rgan boyvachchaning hushi boshidan ketib, yuz ming mashaqqatlar bilan o'zini to'xtatdi. Ertasi erta bilan bobo huzuriga keldi. Boboga boʻlgan voqealarni birin- sirin hikoya qildi. Bobo o'ylanib, keyin: - Ey o'g'lim, uning iloji shuki, sen uyingga borgin, xotiningga: Narigi qishloqda mening bir xolam bor, shu xolam to'yga aytib yuboribdi.
//            Qatlama, boʻgʻirsoq va har xil taomlardan pishir, ikkovimiz to'yga borib kelaylik», deb aytgin. Bu taomlarni pishirgach, bir yaxshi otni topib ol. Qishloqqa borishingda uzun masofalik bir hiyla qilib otdan xotiningni tushir. O'zing otga minib qochsang, u senga yetolmaydi. Oxiri u ilon boʻlib seni quvadi, ammo issiq qumda o'lib ketishi mumkin, - deb yo'l-yo'riqlar o'rgatdi.Boyvachcha boboga rahmat aytib, uyiga borib xotiniga: Narigi qishloqda bir xolam bor edi. Shu to'y qilar emish. Shunga borsak, nima dersan? - deb maslahat qildi. Xotini borishga rozi boʻldi.
//           So'ngra ikkovlashib qatlama, boʻgʻirsoq, yoyma chalpak va har xil taomlardan tayyorlab, boyvachcha bir yaxshi otni topib, otga ikkovlari mingashib boraverdilar. Bir necha tosh yurgandan keyin oldilaridan bir qumlik sahro chiqdi. Shu qumdan yurgach, xotin eriga: -Bu qumdan yurmang, boshqa yo'l toping, - deb ko'p qarshilik qildi. Boyvachcha:U joylarga borishga boshqa yo'l yo'q, o'zi yaqin qoldi, - deb aldab-suldab qumning o'rtasiga yetdi. Qum nihoyatda issiq edi. Bir joyga etgach, boyvachcha bir hiyla qilib otning ayilini yechib tushirib yubordi: - Ey, ish chatoq boʻldi, deb otini to'xtatib, xotiniga:
//            Birpas tushib otga dam beraylik, - desa xotini hech ko'nmadi.Yana bir joyga borib:
//            - Ayilni tortmasa, hech bo'lmaydi, bir tushsang hech nima qilmaydi, - deb nochor xotinini tushirib, ayilini tortar- tortmas chaqqonlik qilib otning ustiga minib, otga qamchi bosdi. Ot esa toʻliqsib boyvachchani ko'tarib ketdi. Xotini boyvachchaning ketidan bir necha qadam quvib, oxiri yetolmagach, bir yumalab ajdar boʻlib quvaverdi. Biyobonning qumi issiqlik qilib, ajdar yurolmasdan keyinda qolib, oxiri yorilib ketdi. Boyvachcha ajdarning uzoqdan qumda sudralib yurolmasdan qumning issig'ligidan yorilib ketganini ko'rdi. U xotinidan qutilib, o'z qishlog'iga qarab keldi. Boboning yo'l ko'rsatishi bilan boyvachcha hamda shu qishloqdagi xalqlar qutulib qoldi.
//             Boyvachcha boboga tahsin-u ofarinlar qildi.Shunday qilib bobo ham bir necha yillar umr ko'rib, yaxshilik bilan murod-maqsadlariga yetdi";
// """"";
//   List chagewords=[
//     ["zamonida",false],["paytda",false],["xushsurat",false],["qarab",false],["savdogarning",false],["qaroqchilar",false],["qochib qutuldim",false],
//     ["mashaqqatlar",false],["ko'rib qoldim",false],["xizmatkorlikka",false],["yolvordi",false],["Keyinchalik",false],["hayron qoldi",false],["sarg'ayib qolibdi",false],["qon",false],
//    [ "ahvol",false],["ilonlar",false],["ajdar",false],["istasa",false],["ko'nglimdan o'tkazdim",false],["Birinchidan",false],["ikkinchidan",false],["ahvoli",false],["go'yoki",false],["asta",false],["ahvol so'rashib",false],
//    [ "achchig'lanib",false],["oʻzimcha",false],["voqeani",false],["sho`r",false],["koʻzalarni",false],["quruq",false],["qulfla",false],["suvsaydi",false],["sirni",false],["ko'ndirib",false],["jimjilog'ini",false],
//     ["qarab chiqdi",false],["yumalab",false],["shakliga",false],["hushi",false],["boshidan",false],["ketib",false],["mashaqqatlar",false],["huzuriga keldi",false],["hiyla",false],["qochsang",false],["quvadi",false],["qumda",false],
//     ["maslahat",false],["sahro",false],["aldab",false],["ko'nmadi",false],["tortmasa",false],["nochor",false],["chaqqonlik",false],["minib",false],["qamchi",false],["yorilib",false],["sudralib",false],["qutilib",false]
//   ];
//   List<String>words=[];
//   List<InlineSpan>textSpan=[TextSpan(text: "Salom"),];
//
// List changes=[];
// int index1=0;
//   List<InlineSpan> text(int index){
//     words=_text.split(" ");
//   String  word=words[index];
//   for(int i=0;i<=chagewords.length-1;i++){
//     changes.add(chagewords[i][0]);
//   }
//   if(changes.contains(word)){
//     index1=changes.indexOf(word);
//     textSpan.add(TextSpan(
//       recognizer: TapGestureRecognizer()
//           ..onTap=(){
//             setState(() {
//               chagewords[index1][1]=!chagewords[index1][1];
//             });
//             if(chagewords[index1][1]== false){
//               context.setLocale(const Locale('uz','UZ'));
//             }
//             else{
//               context.setLocale(const Locale('fr','FR'));
//
//             }
//           },
//
//         text: "$word".tr()+' ',
//     ));
//
//   }
//   else{
//     textSpan.add(TextSpan(
//       text: "$word ",
//       style: TextStyle(color: Colors.black,fontSize: 18),
//     ));
//   }
//     return textSpan;
//   }
//
//
//
// List<InlineSpan>qwerty=[TextSpan(text: "Salom"),TextSpan(text: "Salom"),TextSpan(text: "Salom"),TextSpan(text: "Salom"),TextSpan(text: "Salom"),TextSpan(text: "Salom"),TextSpan(text: "Salom"),TextSpan(text: "Salom"),TextSpan(text: "Salom"),];
//
//
//   @override
//   Widget build(BuildContext context) {
//
//         return RichText(text:TextSpan(
//                 children: textSpan,
//               ) ,
//             );
//   }
// }
import 'package:book/Data/database.dart';
import 'package:book/Utils/DialogBox.dart';
import 'package:flutter/cupertino.dart';
import 'package:flutter/gestures.dart';
import 'package:flutter/material.dart';

import 'books.dart';

class RamuzchiBobo extends StatefulWidget {
  const RamuzchiBobo({Key? key}) : super(key: key);

  @override
  State<RamuzchiBobo> createState() => _RamuzchiBoboState();
}

class _RamuzchiBoboState extends State<RamuzchiBobo> {
  String? _text;
  List<String>? chagewords;
@override
  void initState() {
    // TODO: implement initState
    super.initState();
    setState(() {
      _text=Books.bookstext["${DataBase.getbookname()}"];
      chagewords=Books.changewords["${DataBase.getbookname()}"];
    });
  }
  bool isselected=false;
  @override
  Widget build(BuildContext context) {
    List<InlineSpan>textSpan=[];
    List<String> words=_text!.split(" ");
    for(int word=0;word<= words.length-1;word++){
      if(chagewords!.contains(words[word])){
        textSpan.add(TextSpan(
          style: TextStyle(color: Colors.red,fontSize: 18),
          recognizer: TapGestureRecognizer()
            ..onTap=(){
              String uzbek= "${Books.uztranslate["${DataBase.getbookname()}"]["${words[word]}"]}";
           showDialog(context: context, builder: (context){
             String fransuz ="${Books.frtranslate["${DataBase.getbookname()}"]["${words[word]}"]}";
             return DialogBox(uzbek: uzbek,fransuz: fransuz,);
           });

            },
          text: "${words[word]}"+' ',

        )
        );
      }
      else{
        textSpan.add(TextSpan(
          text: "${words[word]} ",
          style: TextStyle(color: Colors.black,fontSize: 18),
        ));
      }
    }
    return ListView(children: [
      RichText(text: TextSpan(
        children: textSpan,
      )),
    ],

    );

  }
}
